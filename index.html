<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unsubscribe form Desapex</title>
	<link rel="icon" type="image/x-icon" href="C:\Sri\Guidelines\Desapex logo_red_Artboard 5.jpg">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <style>
        .register .nav-tabs .nav-link:hover{
            border: none;
        }
        .text-align{
            margin-top: -3%;
            margin-bottom: -9%;

            padding: 10%;
            margin-left: 30%;
        }
        .form-new{
            margin-right: 22%;
            margin-left: 20%;
        }
        .register-heading{
            font-size: 30px;
            margin-bottom: 10%;
            color: #f8f8f8;
            font-style:normal;
        }
        .register-heading h1{
            margin-left: 2%;
            margin-bottom: 10%;
            color: #e9ecef;
        }
        .register{
            background: linear-gradient(135deg, rgba(225, 255, 255, 0.1), rgba(255,255,255,0));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 25px;
            border: 1px medium solid rgba(225, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(0,0,0,0.37);
            margin-top: 10%;
            padding: 5%;
        }
        .btnSubmit{
            width: 50%;
            border-radius: 1rem;
            padding: 1.5%;
            color: #fff;
            background-color: #012579;
            border: none;
            cursor: pointer;
            margin-right: 6%;
            color: rgb(246, 246, 252);
            margin-top: 4%;
        }
    </style>
</head>
<body style="background-image: url('\mac-os-x-mountains-forest-hills-foggy-morning-stock-5k-5120x2880-4046.bmp'); background-repeat: no-repeat; background-size: cover;">
    
<div class="container register">
    <div class="row">
        <div class="col-md-12">
            <div class="tab-pane fade show active text-align form-new" id="home" role="tabpanel" aria-labelledby="home-tab">
                <h3 class="register-heading text-left">Do you want to Unsubscribe?</h3>
                <div class="row register-form">
                    <div class="col-md-12">
                        <form id="unsubscribeForm" autocomplete="off">
                            <div class="form-group">
                                <input type="email" id="emailInput" class="form-control" placeholder="Your Email *" required/>
                            </div>
                            <div class="form-group">
                                <input type="text" name="Reason" class="form-control" placeholder="Reason.. *" required/>
                            </div>
                            <div class="form-group">
                                <button type="button" onclick="storeEmail()" class="btnSubmit btn-block">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
     </div>
</div>
</div>
<script>
    // Retrieve the email address from the cookie
    var email = getCookie("email");
    if (email) {
        document.getElementById("emailInput").value = email;
    }

    // Function to get the value of a cookie
    function getCookie(name) {
        var cookieName = name + "=";
        var cookies = document.cookie.split(";");
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            if (cookie.indexOf(cookieName) === 0) {
                return cookie.substring(cookieName.length, cookie.length);
            }
        }
        return "";
    }

    // Function to set the value of a cookie
    function setCookie(name, value, days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    // Function to store the email address
    function storeEmail() {
        var email = document.getElementById("emailInput").value;
        setCookie("email", email, 30); // Store the email in a cookie for 30 days

        // Implement the logic to store the email address as needed
        // This can be done using AJAX, form submission, or any other method
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwJ6-02uMRa1vTkcV8yPkLtZDhqTfYEoq5leDv8oirlhevmsO0EjUSCuK-wBYR3cu0/exec'
        const form = document.getElementById('unsubscribeForm');

        fetch(scriptURL, { method: 'POST', body: new FormData(form)})
            .then(response => {
                alert("Unsubscribing was successful!");
                // You can perform any additional actions after successful unsubscribe
            })
            .catch(error => console.error('Error!', error.message));
    }
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</body>
</html>      
